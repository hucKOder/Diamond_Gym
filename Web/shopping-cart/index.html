<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="layout.css" type="text/css"> 
</head>

<body style="background-color: #343a40;">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="../homepage/"></a><i class="d-block fa fa-diamond fa-5x text-info"></i>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
        aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item page-title">
            <a class="nav-link text-info" href="../homepage/">Diamond Gym</a>
          </li>
        </ul>
        <ul class="navbar-nav">
          <!--  style="margin-right: 0!important;" -->
          <li class="nav-item" style="float: right;">
            <a class="btn navbar-btn ml-2 text-white btn-primary" href="#"><i class="fa d-inline fa-lg fa-user-circle-o"> </i> Účet</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
<!--   <div class="text-center text-white bg-dark" style="padding-top: 22px;">
    <div class="container">
      <div class="row">
        <div class="col-md-12 p-2">
          <form class="form-inline m-0">
            <div class="col-md-10" style="text-align: left;">
              <input class="form-control mr-2" type="text" placeholder="Hľadaný výraz" style="width: 100%;"> </div>
            <div class="col-md-2">
              <button class="btn btn-primary" type="submit" style="width: 100%;"><i class="fa fa-search"></i> Hľadať</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div> -->
  <div class="text-white bg-dark">
    <div class="container">
      <div class="row">
        <div class="col-md-2" style="padding-top: 38px;">
          <ul class="nav nav-pills flex-column text-left">
            <li class="nav-item border border-dark p-1">
              <a href="../homepage/" class="active nav-link"><i class="fa fa-home fa-home"></i>&nbsp;Domov</a>
            </li>
            <li class="nav-item border border-dark p-1">
              <a href="../shop/" class="nav-link active"><i class="fa fa-shopping-cart"></i>&nbsp;Obchod</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Akcie</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Gainery</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Proteíny</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Kreatiny</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Spaľovače tukov</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Tyčinky</a>
            </li>
            <li class="nav-item border-dark p-1">
              <a href="../shop/" class="nav-link text-white menu-item-gray">Príslušenstvo</a>
            </li>
            <li class="nav-item border border-dark p-1">
              <a href="../community/" class="active nav-link"><i class="fa fa-handshake-o"></i>&nbsp;Komunita</a>
            </li>
          </ul>
        </div>
        <div class="p-4 col-md-10" id="cart-items" data-item-count="0">
          <h2 class="my-3" style="padding-bottom: 12px; margin-bottom: 0!important; border-bottom: 1px solid white;"><i class="fa fa-shopping-cart"></i> Nákupný košík <a href="javascript:" id="cart-add-item">+</a></h2>

          <h4 style="padding-top: 12px; display: none;" id="cart-empty">Nákupný košík prázdny. <a href="../shop/">Späť do obchodu</a></h4>
          
          <div class="row" style="padding-top: 12px; display: none;" id="cart-item-1">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-2">
                  <img src="img/whey-82-plus.jpg" style="max-width: 80%; border: 1px solid white;"> 
                </div>
                <div class="col-md-5" style="margin: auto;">
                  <a href="../shop/">
                    <h2 style="display: inline-block; color: white;">Whey 82 Plus+</h2>
                  </a>
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <input type="number" name="value" style="width: 80%; text-align: center;" class="item-count" data-item-id="1" value="1" />
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <h4 style="display: inline-block; color: white;" id="item-price" data-price="19" data-base-price="19">19,00 €</h4>
                </div>
                <div class="col-md-1" style="margin: auto; text-align: center;">
                  <a href="javascript:" class="cart-remove-item" data-item-id="1">
                    <h4 style="display: inline-block; color: white;"><i class="fa fa-trash-o"></i></h4>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="row" style="padding-top: 12px; display: none;" id="cart-item-2">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-2">
                  <img src="img/gold-standard-whey-100.jpg" style="max-width: 80%; border: 1px solid white;"> 
                </div>
                <div class="col-md-5" style="margin: auto;">
                  <a href="../shop/">
                    <h2 style="display: inline-block; color: white;">Gold 100% WHEY</h2>
                  </a>
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <input type="number" name="value" style="width: 80%; text-align: center;" class="item-count" data-item-id="2" value="1" />
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <h4 style="display: inline-block; color: white;" id="item-price" data-price="22" data-base-price="22">22,00 €</h4>
                </div>
                <div class="col-md-1" style="margin: auto; text-align: center;">
                  <a href="javascript:" class="cart-remove-item" data-item-id="2">
                    <h4 style="display: inline-block; color: white;"><i class="fa fa-trash-o"></i></h4>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="row" style="padding-top: 12px; display: none;" id="cart-item-3">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-2">
                  <img src="img/testo-4hd.jpg" style="max-width: 80%; border: 1px solid white;"> 
                </div>
                <div class="col-md-5" style="margin: auto;">
                  <a href="../shop/">
                    <h2 style="display: inline-block; color: white;">Testo 4HD 120 kaps</h2>
                  </a>
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <input type="number" name="value" style="width: 80%; text-align: center;" class="item-count" data-item-id="3" value="1" />
                </div>
                <div class="col-md-2" style="margin: auto; text-align: center;">
                    <h4 style="display: inline-block; color: white;" id="item-price" data-price="35" data-base-price="35">35,00 €</h4>
                </div>
                <div class="col-md-1" style="margin: auto; text-align: center;">
                  <a href="javascript:" class="cart-remove-item" data-item-id="3">
                    <h4 style="display: inline-block; color: white;"><i class="fa fa-trash-o"></i></h4>
                  </a>
                </div>
              </div>
            </div>
          </div>


        </div>
        <div class="p-4 col-md-12" id="cart-continue" style="display: none;">
          <div class="row">
            <div class="col-md-12">
              
            <div class="col-md-8"></div>  
            <div class="col-md-3" style="float: right; border-top: 1px solid white;">
              <div class="row">
                <div class="col-md-5">
                  <h4 style="padding-top: 12px;">Spolu</h4>                  
                </div>
                <div class="col-md-7" style="text-align: right;">
                  <h4 style="padding-top: 12px;" id="cart-price-total">50,00 €</h4>
                </div>
              </div>
            </div>
            </div>
          </div>
          <div class="row">
          	<div class="col-md-12" style="text-align: right; padding-top: 12px;">
          		<a class="btn navbar-btn ml-2 text-white btn-primary" href="../order-form/"><i class="fa d-inline fa-lg fa-money"> </i> Pokračovať</a>
          	</div>
          </div>

         <!--  <h2 class="my-3" style="padding-bottom: 12px; border-bottom: 1px solid white;"><i class="fa fa-archive"></i> Témy diskusií</h2>
          <div class="row">
            
          </div> -->
        </div>
      </div>
    </div>
  </div>
<!--   <div class="modal-content" style="position: fixed; right: 50px; bottom: 0; width: 400px;">
    <div class="modal-header">
      <h5 class="modal-title">Verejný chat</h5>
    </div>
    <div class="modal-body">
      <p><b>Jožo:</b> Čaute</p>
    </div>
    <div class="modal-footer">
      <input class="form-control mr-2" type="text" placeholder="Tvoja správa...">
      <button type="button" class="btn btn-primary">Odoslať</button>
    </div>
  </div> -->
  <div class="style4 style5 bg-secondary py-2" style="background-color: black;">
    <div class="container">
      <div class="row">
        <div class="col-md-4 my-3">
          <p class="lead text-white text-center py-5">Diamond Gym
            <br>Kontakt: +421 960 960 960
            <br>Ilkovičova 200, 754 01 Bratislava 4</p>
        </div>
        <div class="col-md-4 my-3">
          <img class="d-block img-fluid" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyDW8nO9JhT_pEjebobq9pgUF2cEp0EUb1I&amp;markers=New+York+City&amp;center=New+York+City&amp;zoom=17&amp;size=640x400&amp;sensor=false"> </div>
        <div class="col-md-4  text-center align-self-center">
          <a href="https://www.facebook.com/" target="_blank"><i class="fa fa-fw fa-facebook fa-3x text-white mx-3"></i></a>
          <a href="https://twitter.com/" target="_blank"><i class="fa fa-fw fa-twitter fa-3x text-white mx-3"></i></a>
          <a href="https://www.instagram.com/" target="_blank"><i class="fa fa-fw fa-instagram fa-3x text-white mx-3"></i></a>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <script src="js.cookie.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      console.log("ready!");
      var itemsCount = Cookies.get('cartCount');
      if (itemsCount == null || isNaN(itemsCount) || parseInt(itemsCount) == 0){
        console.log("null or zero or type mismatch");
        $("#cart-empty").show();
        Cookies.set('cartCount', 0);
      }else{
        var count = parseInt(itemsCount); 
        console.log(count);
        $("#cart-items").attr("data-item-count", count);

        $("#cart-item-1").show();

        var price = 19;

        for (var i = 2; i <= count; i++) {
          if(i == 2){
            price+=22;
            $("#cart-item-2").show();
            continue;
          }else if(i == 3){
            price+=35;
            $("#cart-item-3").show();
            continue;
          }

          if(i % 3 == 1){
            price+=22;
            $("#cart-item-2").clone().attr('id', 'cart-item-'+ i).appendTo("#cart-items");
            $("#cart-item-"+i).find(".cart-remove-item").attr('data-item-id', i);
            $("#cart-item-"+i).find(".item-count").attr('data-item-id', i);
          }else if(i % 3 == 2){
            price+=19;
            $("#cart-item-1").clone().attr('id', 'cart-item-'+ i).appendTo("#cart-items");
            $("#cart-item-"+i).find(".cart-remove-item").attr('data-item-id', i);
            $("#cart-item-"+i).find(".item-count").attr('data-item-id', i);
          }else{
            price+=35;
            $("#cart-item-3").clone().attr('id', 'cart-item-'+ i).appendTo("#cart-items");
            $("#cart-item-"+i).find(".cart-remove-item").attr('data-item-id', i);
            $("#cart-item-"+i).find(".item-count").attr('data-item-id', i);
          }
        }

        $("#cart-continue").show();

        $("#cart-price-total").attr("data-price", price);
        $("#cart-price-total").text(price+",00 €");
      }

      $(".item-count").change(function(e){
        var itemId = $(e.target).attr("data-item-id");
        var itemCount = $(e.target).val();
        var itemPriceElem = $("#cart-item-"+itemId).find("#item-price");
        var itemPrice = itemPriceElem.attr("data-price");
        var itemBasePrice = itemPriceElem.attr("data-base-price");

        var newPrice = itemBasePrice * itemCount;

        if(itemPrice < newPrice){
          var totalPriceElem = $("#cart-price-total");
          var newTotal = parseInt(totalPriceElem.attr("data-price")) + parseInt(itemBasePrice);
          totalPriceElem.attr("data-price", newTotal);
          totalPriceElem.text(newTotal+",00 €");
        }

        itemPriceElem.text(newPrice + ",00 €");
        itemPriceElem.attr("data-price", newPrice);
        

        // console.log(itemId, itemcount, itemprice);
      });

      $(".cart-remove-item").click(function(e){
        var id = $(e.delegateTarget).attr("data-item-id");
        console.log("id", id, id % 3);
        var newPrice = $("#cart-price-total").attr("data-price");
        console.log("newPrice", newPrice);

        $("#cart-item-"+id).remove();

        if(id % 3 == 1){
          newPrice -= 22;
        }else if(id % 3 == 2){
          newPrice -= 19;
        }else{
          newPrice -= 35;
        }
        console.log("newPrice", newPrice)

        var count = $("#cart-items").attr("data-item-count");
        $("#cart-items").attr("data-item-count", --count);
        Cookies.set('cartCount', count);
        console.log(count);
        $("#cart-price-total").text(newPrice+",00 €");
        $("#cart-price-total").attr("data-price", newPrice);

        if(count === 0){
          location.href = location.href;
        }

      });

      $("#cart-add-item").click(function(){
        var count = Cookies.get('cartCount');
        Cookies.set('cartCount', ++count);
        location.href = location.href;
      });

    });
    
  </script>
</body>

</html>